import React, { useState, useEffect } from 'react';
import { AlertCircle, CheckCircle, ChevronRight, Lock } from 'lucide-react';
import Confetti from 'react-confetti'; // Install this for celebration effects
import ProgressBar from 'react-bootstrap/ProgressBar'; // Bootstrap for progress bar
import './DeepWorkLearning.css'; // Custom CSS for styling

const log = (action, data) => {
  console.log(`[DeepWork] ${action}:`, data);
};

// Lesson Components (Same as your code)

// Add a Badge component for achievements
const Badge = ({ title, icon, earned }) => (
  <div
    className={`badge flex items-center gap-2 p-3 rounded-lg shadow ${
      earned ? 'bg-green-200 text-green-800' : 'bg-gray-200 text-gray-500'
    }`}
  >
    <div>{icon}</div>
    <span>{title}</span>
  </div>
);

// Main Lesson Component
const Lesson = ({ title, content, quiz, isLocked, isCompleted, onComplete }) => {
  const [isExpanded, setIsExpanded] = useState(false);
  const [showConfetti, setShowConfetti] = useState(false);

  const handleToggle = () => {
    if (!isLocked) {
      log('Lesson Toggled', { title, isLocked, wasExpanded: isExpanded });
      setIsExpanded(!isExpanded);
    }
  };

  const handleCompletion = () => {
    setShowConfetti(true);
    onComplete();
    setTimeout(() => setShowConfetti(false), 3000);
  };

  return (
    <div className={`lesson-card border rounded-lg overflow-hidden transition-shadow ${
      isLocked ? 'opacity-50' : 'hover:shadow-md
